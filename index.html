<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<title>–°–∏–º—É–ª—è—Ç–æ—Ä –ú–∞–≥–∞–∑–∏–Ω–∞</title>
<style>
  body {
    margin: 0; padding: 0; font-family: Arial, sans-serif;
    background: #f0f8ff;
    display: flex; flex-direction: column; align-items: center;
  }
  #startScreen, #gameScreen {
    width: 100%; max-width: 480px;
    padding: 20px;
    box-sizing: border-box;
  }
  #startScreen {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    height: 100vh;
  }
  #startScreen input {
    padding: 10px;
    font-size: 18px;
    width: 80%;
    margin-bottom: 10px;
  }
  #startScreen button {
    padding: 10px 20px;
    font-size: 18px;
    cursor: pointer;
    background: #4a90e2;
    color: white;
    border: none;
    border-radius: 6px;
  }

  #header {
    background: #4a90e2;
    color: white;
    padding: 10px 20px;
    width: 100%;
    box-sizing: border-box;
    text-align: center;
    border-radius: 8px 8px 0 0;
  }
  #header h1 {
    margin: 0;
  }
  #header .rating {
    margin-top: 4px;
    font-size: 16px;
  }

  #balance {
    margin: 15px 0;
    font-size: 20px;
    text-align: center;
  }

  h3 {
    margin-bottom: 6px;
  }

  #products, #storage {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
  }
  .product, .storage-item {
    background: white;
    border-radius: 8px;
    box-shadow: 0 0 7px rgba(0,0,0,0.15);
    padding: 10px;
    width: 140px;
    box-sizing: border-box;
    text-align: center;
    transition: transform 0.2s;
  }
  .product:hover, .storage-item:hover {
    transform: scale(1.05);
  }
  .product button, .storage-item button {
    margin-top: 8px;
    padding: 5px 10px;
    font-size: 14px;
    cursor: pointer;
    background: #4a90e2;
    color: white;
    border: none;
    border-radius: 6px;
  }
  .product input[type=number], .storage-item input[type=number] {
    width: 60px;
    margin-top: 6px;
    padding: 3px;
    font-size: 14px;
    border: 1px solid #ccc;
    border-radius: 4px;
  }

  #storage {
    margin-top: 20px;
  }

  #upgradeSection {
    margin: 20px 0;
    text-align: center;
  }
  #upgradeSection button {
    padding: 10px 15px;
    font-size: 16px;
    cursor: pointer;
    background: #4a90e2;
    color: white;
    border: none;
    border-radius: 8px;
    transition: background 0.3s;
  }
  #upgradeSection button:hover {
    background: #357ABD;
  }

  #reviews {
    margin-top: 20px;
    max-height: 150px;
    overflow-y: auto;
    background: white;
    border-radius: 8px;
    padding: 10px;
    box-sizing: border-box;
    box-shadow: 0 0 7px rgba(0,0,0,0.1);
  }
  #reviews .review {
    border-bottom: 1px solid #ddd;
    padding: 5px 0;
    font-size: 14px;
  }
  #reviews .review:last-child {
    border-bottom: none;
  }
  .stars {
    color: #f5a623;
  }

  /* –°–º–∞–π–ª–∏–∫–∏ –∫ —Ç–æ–≤–∞—Ä–∞–º */
  .emoji {
    font-size: 20px;
    margin-right: 6px;
  }
</style>
</head>
<body>

<div id="startScreen">
  <h2>–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞</h2>
  <input type="text" id="shopNameInput" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞" maxlength="20" />
  <button id="startBtn">–ù–∞—á–∞—Ç—å</button>
</div>

<div id="gameScreen" style="display:none;">
  <div id="header">
    <h1 id="shopName">–ú–∞–≥–∞–∑–∏–Ω</h1>
    <div class="rating">–†–µ–π—Ç–∏–Ω–≥: <span id="ratingValue">‚Äî</span></div>
  </div>

  <div id="balance">–ë–∞–ª–∞–Ω—Å: <span id="balanceValue">50</span> –º–æ–Ω–µ—Ç</div>

  <h3>–¢–æ–≤–∞—Ä—ã –¥–ª—è –ø–æ–∫—É–ø–∫–∏</h3>
  <div id="products"></div>

  <h3>–°–∫–ª–∞–¥ (–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å <span id="storageCapacity">10</span>)</h3>
  <div id="storage"></div>

  <div id="upgradeSection">
    <button id="upgradeStorageBtn">–£–ª—É—á—à–∏—Ç—å —Å–∫–ª–∞–¥ (—Ü–µ–Ω–∞: <span id="upgradePrice">100</span> –º–æ–Ω–µ—Ç)</button>
  </div>

  <h3>–û—Ç–∑—ã–≤—ã –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π</h3>
  <div id="reviews"></div>
</div>

<script>
(() => {
  // --- –î–∞–Ω–Ω—ã–µ ---
  const productsData = [
    {id: 'egg', name: '–Ø–π—Ü–æ', price: 10, emoji: 'ü•ö'},
    {id: 'banana', name: '–ë–∞–Ω–∞–Ω', price: 15, emoji: 'üçå'},
    {id: 'bread', name: '–•–ª–µ–±', price: 20, emoji: 'üçû'},
    {id: 'milk', name: '–ú–æ–ª–æ–∫–æ', price: 25, emoji: 'ü•õ'},
    {id: 'cheese', name: '–°—ã—Ä', price: 30, emoji: 'üßÄ'},
    {id: 'apple', name: '–Ø–±–ª–æ–∫–æ', price: 35, emoji: 'üçé'},
    {id: 'orange', name: '–ê–ø–µ–ª—å—Å–∏–Ω', price: 37, emoji: 'üçä'},
    {id: 'ramen', name: '–†–∞–º–µ–Ω', price: 40, emoji: 'üçú'},
    {id: 'coconut', name: '–ö–æ–∫–æ—Å', price: 45, emoji: 'ü••'},
    {id: 'fish', name: '–†—ã–±–∞', price: 50, emoji: 'üêü'},
  ];

  let balance = 50;
  let storageCapacity = 10;
  let upgradePrice = 100;
  let storage = {}; // id -> {count, price}
  let reviews = []; // –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –æ—Ç–∑—ã–≤–æ–≤

  let shopName = '–ú–∞–≥–∞–∑–∏–Ω';

  // --- –≠–ª–µ–º–µ–Ω—Ç—ã ---
  const startScreen = document.getElementById('startScreen');
  const gameScreen = document.getElementById('gameScreen');
  const shopNameElem = document.getElementById('shopName');
  const ratingValueElem = document.getElementById('ratingValue');
  const balanceValueElem = document.getElementById('balanceValue');
  const productsElem = document.getElementById('products');
  const storageElem = document.getElementById('storage');
  const storageCapacityElem = document.getElementById('storageCapacity');
  const upgradePriceElem = document.getElementById('upgradePrice');
  const upgradeStorageBtn = document.getElementById('upgradeStorageBtn');
  const reviewsElem = document.getElementById('reviews');
  const shopNameInput = document.getElementById('shopNameInput');
  const startBtn = document.getElementById('startBtn');

  // --- –§—É–Ω–∫—Ü–∏–∏ ---
  function renderProducts() {
    productsElem.innerHTML = '';
    productsData.forEach(p => {
      const priceOnStorage = storage[p.id]?.price ?? p.price;
      const div = document.createElement('div');
      div.className = 'product';
      div.innerHTML = `
        <span class="emoji">${p.emoji}</span><strong>${p.name}</strong><br/>
        –¶–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏: <strong>5</strong> –º–æ–Ω–µ—Ç<br/>
        –¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏ (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–∞—è): <input type="number" min="10" max="50" value="${priceOnStorage}" data-id="${p.id}" style="width: 60px;" /> <br/>
        <button data-id="${p.id}">–ö—É–ø–∏—Ç—å</button>
      `;
      productsElem.appendChild(div);
    });
  }

  function renderStorage() {
    storageElem.innerHTML = '';
    const keys = Object.keys(storage);
    if(keys.length === 0) {
      storageElem.innerHTML = '<i>–°–∫–ª–∞–¥ –ø—É—Å—Ç</i>';
      return;
    }
    keys.forEach(id => {
      const item = storage[id];
      const product = productsData.find(p => p.id === id);
      const div = document.createElement('div');
      div.className = 'storage-item';
      div.innerHTML = `
        <span class="emoji">${product.emoji}</span><strong>${product.name}</strong><br/>
        –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${item.count}<br/>
        –¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏: <input type="number" min="10" max="50" value="${item.price}" data-id="${id}" class="storage-price-input" style="width: 60px;" /><br/>
        <button data-id="${id}">–ü—Ä–æ–¥–∞—Ç—å</button>
      `;
      storageElem.appendChild(div);
    });
  }

  function renderBalance() {
    balanceValueElem.textContent = balance;
  }

  function renderStorageCapacity() {
    storageCapacityElem.textContent = storageCapacity;
  }

  function renderUpgrade
